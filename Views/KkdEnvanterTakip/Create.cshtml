@model SecKaliteDb.Models.KkdEnvanterTakip

<style>
    .page-title {
        font-size: 24px; /* Yazı boyutu */
        line-height: 48px; /* Satır yüksekliği */
        font-weight: 100; /* Yazı kalınlığı */
        font-style: normal; /* Yazı stili */
        text-align: left; /* Metin hizalaması */
        text-decoration: underline; /* Altı çizili */
        color: #000000; /* Yazı rengi */
        border-style: none; /* Kenarlık stili */
    }

    #kkdnitelik {
        display: block; /* Her seçeneği kendi satırında gösterir */
        width: 100%; /* Genişliği ayarla */
        white-space: nowrap; /* Satır içi boşlukları engelle */
    }

</style>

<h1 class="page-title">KKD Envanter Takip</h1>
<br />

<div class="row">
    <div class="col-md-12">
        <form asp-action="Create">
            <div asp-validation-summary="ModelOnly" class="text-danger"></div>
            <div class="row">
                <div class="form-group col-md-6 mb-3">
                    <label asp-for="PersonelId" class="control-label">Personel:</label>
                    <select asp-for="PersonelId" class="form-control" asp-items="ViewBag.PersonelId" required>
                        <option value="">Seçiniz...</option>
                    </select>
                    <span asp-validation-for="PersonelId" class="text-danger"></span>
                </div>
                <div class="form-group col-md-6 mb-3">
                    <label asp-for="BedenNumaraId" class="control-label">Beden/Numara:</label>
                    <select asp-for="BedenNumaraId" class="form-control" asp-items="ViewBag.BedenNumaraId" required>
                        <option value="">Seçiniz...</option>
                    </select>
                    <span asp-validation-for="BedenNumaraId" class="text-danger"></span>
                </div>
            </div>
            <div class="row">
                <div class="form-group col-md-6 mb-3">
                    <label asp-for="KkdGrubuId" class="control-label">KKD Grubu Adı:</label>
                    <select asp-for="KkdGrubuId" class="form-control" id="kkdgrubu" asp-items="ViewBag.KkdGrubuId" required>
                        <option value="">Seçiniz...</option>
                    </select>
                    <span asp-validation-for="KkdGrubuId" class="text-danger"></span>
                </div>
                <div class="form-group col-md-6 mb-3">
                    <label asp-for="KkdNiteligiId" class="control-label">KKD Niteliği Adı:</label>
                    <select asp-for="KkdNiteligiId" class="form-control" id="kkdnitelik" asp-items="ViewBag.KkdNiteligiId" required>
                        <option value="">Seçiniz...</option>
                    </select>
                    <span asp-validation-for="KkdNiteligiId" class="text-danger"></span>
                </div>
            </div>
            <div class="row">
                <div class="form-group col-md-6 mb-3">
                    <label asp-for="BirimId" class="control-label">Birim Adı:</label>
                    <select asp-for="BirimId" class="form-control" asp-items="ViewBag.BirimId" required>
                        <option value="">Seçiniz...</option>
                    </select>
                    <span asp-validation-for="BirimId" class="text-danger"></span>
                </div>
                <div class="form-group col-md-6 mb-3">
                    <label asp-for="TeslimTarihi" class="control-label">Teslim Tarihi:</label>
                    <input asp-for="TeslimTarihi" class="form-control" type="date" required />
                    <span asp-validation-for="TeslimTarihi" class="text-danger"></span>
                </div>
            </div>

            <br />
            <div class="form-group d-flex justify-content-between">
                <a asp-action="Index" class="btn btn-outline-primary">GERİ</a>
                <input type="submit" value="EKLE" class="btn btn-outline-primary" />
            </div>
        </form>
    </div>
</div>
<script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.6.0.min.js"></script>
<script>
    $(document).ready(function () {
        $('#kkdgrubu').change(function () {
            var kkdGrubuId = $(this).val();
            $.ajax({
                url: '@Url.Action("GetKkdNiteligi", "KkdEnvanterTakip")',
                type: 'GET',
                dataType: 'json', // JSON veri döneceğini belirtir
                data: { kkdGrubuId: kkdGrubuId },
                success: function (data) {
                    console.log(data);
                    var $kkdNiteligiDropdown = $('#kkdnitelik');
                    $kkdNiteligiDropdown.empty();
                    $.each(data, function (index, item) {
                        $kkdNiteligiDropdown.append($('<option>', {
                            value: item.id,
                            text: item.nitelikAdi // JSON anahtarına uyumlu olarak düzeltildi
                        }));
                    });
                }
            });
        });
    });

</script>



